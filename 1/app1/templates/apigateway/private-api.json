{
  "swagger" : "2.0",
  "info" : {
    "description" : "This is a private API for ${project} in the ${env} environment.",
    "version" : "2025-07-29T12:50:10Z",
    "title" : "${project}-${env}"
  },
  "host": "${project}-${env}",
  "basePath": "/${env}",
  "schemes": [ "https" ],
  "paths": {
    "/{proxy+}": {
      "x-amazon-apigateway-any-method": {
        "produces": [ "application/json" ],
        "parameters": [
          {
            "name": "proxy",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "default": {
            "description": "Default response",
            "schema": {
              "$ref": "#/definitions/Empty"
            },
            "headers": {
              "Access-Control-Allow-Origin": {
                "type": "string"
              },
              "Access-Control-Allow-Methods": {
                "type": "string"
              },
              "Access-Control-Allow-Headers": {
                "type": "string"
              }
            }
          }
        },
        "x-amazon-apigateway-integration": {
          "type": "http_proxy",
          "connectionId": "${vpc_link_id}",
          "httpMethod": "ANY",
          "uri": "https://${lb_endpoint}/{proxy}",
          "responses": {
            "default": {
              "statusCode": "200"
            }
          },
          "requestParameters": {
            "integration.request.path.proxy": "method.request.path.proxy"
          },
          "timeoutInMillis": ${API_TIMEOUT},
          "passthroughBehavior": "when_no_match",
          "connectionType": "VPC_LINK",
          "cacheKeyParameters": [ "method.request.path.proxy" ]
        }
      }
    }
  },
  "definitions": {
    "Empty": {
      "type": "object",
      "title": "Empty Schema"
    }
  },
  "x-amazon-apigateway-policy": {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Effect": "Allow",
        "Principal": "*",
        "Action": "execute-api:Invoke",
        "Resource": "execute-api:/*",
        "Condition": {
          "StringNotEquals": {
            "aws:aws:SourceVpce": "${vpc_endpoint}"
          }
        }
      },
      {
        "Effect": "Allow",
        "Principal": "*",
        "Action": "execute-api:Invoke",
        "Resource": "execute-api:/*"
      }
    ]
  },
  "x-amazon-apigateway-endpoint-configuration": {
    "vpcEndpointIds": [ "${vpc_endpoint}" ]
  }
}